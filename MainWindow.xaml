<Window x:Class="OlibPasswordManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:core="clr-namespace:OlibPasswordManager.Properties.Core"
        xmlns:c="clr-namespace:OlibPasswordManager"
        mc:Ignorable="d"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        KeyDown="Window_KeyDown"
        FontFamily="{StaticResource Montserrat}"
        Background="#FF5A0F26"
        WindowStartupLocation="CenterScreen"
        Title="Olib Password Manager" Height="450" Width="800" MinWidth="600" MinHeight="350">
    <Window.Resources>
        <DataTemplate x:Key="PasswordF">
            <Grid Margin="0,2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Border CornerRadius="999" Background="White" Width="25" Grid.RowSpan="2" Height="25">
                    <Image Source="{Binding Path=Image}" Height="16" />
                </Border>
                <TextBlock Text="{Binding Path=Name}" x:Name="Gas" FontSize="16" Grid.Row="0" Grid.Column="1"
                           Foreground="{DynamicResource ForegroundWindow}" />
                <TextBlock Text="{Binding Path=PasswordName}" Foreground="#777777" Grid.Row="1" Grid.Column="1" />
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.Resources>
            <core:ShowProgram x:Key="ShowProgram" />
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="16"/>
            <RowDefinition Height="40"/>
            <RowDefinition/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>

        <Border x:Name="bNotification" Opacity="0" Visibility="Collapsed" Grid.Column="2" Grid.Row="1" Panel.ZIndex="10" Margin="5" Width="Auto" CornerRadius="5" Background="Green" HorizontalAlignment="Right">
            <DockPanel Margin="5">
                <Image Source="{StaticResource TickMarkDrawingImage}"  Margin="0,0,15,0"/>
                <AccessText x:Name="NotText" VerticalAlignment="Center" TextWrapping="Wrap" Foreground="White"/>
            </DockPanel>
        </Border>
        <Image x:Name="saveIcon" Grid.Column="2" Opacity="0" Visibility="Collapsed" Grid.Row="1" Panel.ZIndex="10" Source="{StaticResource saveDrawingImage}" Margin="5" HorizontalAlignment="Right"/>
        <Menu Grid.ColumnSpan="3" FontFamily="{StaticResource Montserrat}" BorderBrush="{DynamicResource PageBordersColor}">
            <MenuItem Header="{DynamicResource File}">
                <MenuItem Header="{DynamicResource CreateBase}" Click="OpenCreateData" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource OpenBase}" Click="OpenBase" InputGestureText="Ctrl + O" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="SaveMenuItem" Header="{DynamicResource SaveBase}" Click="SaveBase" IsEnabled="False" InputGestureText="Ctrl + S" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="LockMenuItem" Header="{DynamicResource LockStorage}" Click="LockMenuItem_OnClick" IsEnabled="False" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="UnlockMenuItem" Header="{DynamicResource UnlockStorage}" Click="UnlockMenuItem_OnClick" Template="{DynamicResource MenuItemTemplate1}"/>
                <Separator/>
                <MenuItem x:Name="NewLoginMenuItem" Header="{DynamicResource AddLogin}" IsEnabled="False" Click="MenuItem_Click" InputGestureText="Ctrl + N" Template="{DynamicResource MenuItemTemplate1}"/>
                <Separator/>
                <MenuItem Header="{DynamicResource Settings}" Click="OpenSettingsWindow" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource ExitFrom}" InputGestureText="Alt + F4" Click="ClosedApplication" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
            <MenuItem Header="{DynamicResource Tools}">
                <MenuItem Header="{DynamicResource PasswordGenerator}" Click="OpenPasswordGeneratorWindow" InputGestureText="Ctrl + G" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="ChangeMenuItem" Header="{DynamicResource ChangeMasterPassword}" IsEnabled="False" Click="OpenChangeMasterPassword" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
            <MenuItem Header="{DynamicResource Reference}">
                <MenuItem Header="{DynamicResource CheckUpdates}" Click="CheckUpdateButton" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource AboutPrograms}" Click="OpenAboutWindow" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
        </Menu>
        
        <tb:TaskbarIcon Grid.Row="0" Grid.Column="0"
                        Visibility="Visible"
                        ToolTipText="Olib Password Manager"
                        IconSource="./icon.ico"
                        MenuActivation="RightClick"
                        DoubleClickCommand="{StaticResource ShowProgram}"
                        PopupActivation="LeftClick">
            <tb:TaskbarIcon.TrayPopup>
                <Border
                    Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}"
                    BorderThickness="1"
                    CornerRadius="5"
                    Width="300"
                    Height="450">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40"/>
                            <RowDefinition/>
                            <RowDefinition Height="50"/>
                        </Grid.RowDefinitions>
                        <Label Grid.Row="0" Content="{DynamicResource ListOfItems}" VerticalContentAlignment="Center" FontSize="16" FontFamily="{StaticResource Montserrat}" Foreground="{DynamicResource ForegroundWindow}"/>
                        <ListBox x:Name="PasswordListNotifyIcon" FontFamily="{StaticResource Montserrat}" SelectionChanged="PasswordListNotifyIcon_OnSelectionChanged" Background="{DynamicResource BackgroundWindow}" BorderBrush="{DynamicResource PageBordersColor}" Grid.Row="1" VirtualizingPanel.ScrollUnit="Pixel" ItemTemplate="{StaticResource PasswordF}"/>
                        <Border x:Name="BorderInformation" Visibility="Collapsed" Grid.Row="0" Grid.RowSpan="3" Background="#FF5A0F26">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="50"/>
                                </Grid.RowDefinitions>
                                <c:PasswordInformationControl x:Name="NotifyControl"/>
                                <Border Grid.Row="1" Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,1,1,1">
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="{DynamicResource Back}" Margin="10" Click="ButtonBase_OnClick"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </tb:TaskbarIcon.TrayPopup>
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="{DynamicResource ShowOPM}" Click="MenuItem_OnClick"/>
                    <MenuItem x:Name="LockNotifyIcon" Header="{DynamicResource LockStorage}" Click="LockMenuItem_OnClick" IsEnabled="False" Template="{DynamicResource MenuItemTemplate1}"/>
                    <MenuItem x:Name="UnlockNotifyIcon" Header="{DynamicResource UnlockStorage}" Click="UnlockMenuItem_OnClick" Template="{DynamicResource MenuItemTemplate1}"/>
                    <Separator/>
                    <MenuItem Header="{DynamicResource ExitFrom}" Click="ClosedApplication" />
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>
        
        <ListBox x:Name="PasswordList" Background="{DynamicResource BackgroundWindow}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,0,1,0" Grid.Row="2" VirtualizingPanel.ScrollUnit="Pixel" ItemTemplate="{StaticResource PasswordF}" Grid.Column="1" SelectionChanged="PasswordList_SelectionChanged"/>
            <Border Grid.Column="1" Grid.Row="3" Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,1,1,0" >
            <Button x:Name="AddButton" IsEnabled="False" Content="{DynamicResource Add}" Margin="10" Click="CreatePassword"/>
        </Border>
        <Border Grid.Column="1" Grid.Row="1" Background="#931d60" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,0,1,1">
            <DockPanel Margin="10">
                <Image Source="{DynamicResource loupeDrawingImage}" Height="20" Margin="0,0,5,0"/>
                <TextBox x:Name="TxtSearch" TextChanged="TxtSearch_TextChanged"/>
            </DockPanel>
        </Border>
        <Frame x:Name="FrameWindow" Grid.Column="2" Grid.Row="1" Grid.RowSpan="3" Source="/Pages/StartScreen.xaml" NavigationUIVisibility="Hidden" Navigated="FrameWindow_Navigated"/>
    </Grid>
</Window>