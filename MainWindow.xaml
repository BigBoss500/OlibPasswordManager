<Window x:Class="OlibPasswordManager.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:tb="http://www.hardcodet.net/taskbar"
        xmlns:core="clr-namespace:OlibPasswordManager.Properties.Core"
        mc:Ignorable="d"
        Loaded="Window_Loaded"
        Closing="Window_Closing"
        KeyDown="Window_KeyDown"
        WindowStartupLocation="CenterScreen"
        FontFamily="{StaticResource Montserrat}"
        Title="Olib Password Manager" Height="450" Width="800" Background="#FF5A0F26" MinWidth="600" MinHeight="350">
    <Window.Resources>
        <Style x:Key="FocusVisual">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Margin="2" StrokeDashArray="1 2" SnapsToDevicePixels="true" StrokeThickness="1" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type ListBoxItem}">
            <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
            <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListBoxItem}">
                        <Border x:Name="Bd" Background="Transparent" SnapsToDevicePixels="true">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="5"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Border x:Name="Bd2" Background="Transparent"/>
                                <ContentPresenter Grid.Column="1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="True" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsMouseOver" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                <Setter Property="Background" TargetName="Bd2" Value="{DynamicResource HoverBackground}"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Selector.IsSelectionActive" Value="False"/>
                                    <Condition Property="IsSelected" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                <Setter Property="Background" TargetName="Bd2" Value="#931d60"/>
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Selector.IsSelectionActive" Value="True"/>
                                    <Condition Property="IsSelected" Value="True"/>
                                </MultiTrigger.Conditions>
                                <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                <Setter Property="Background" TargetName="Bd2" Value="#931d60"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <DataTemplate x:Key="PasswordF">
            <Grid Margin="0,2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="30" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <Image Source="{Binding Path=Image}" Grid.RowSpan="2" Height="16" />
                <TextBlock Text="{Binding Path=Name}" x:Name="Gas" FontSize="16" Grid.Row="0" Grid.Column="1"
                           Foreground="{DynamicResource ForegroundWindow}" />
                <TextBlock Text="{Binding Path=PasswordName}" Foreground="#777777" Grid.Row="1" Grid.Column="1" />
            </Grid>
        </DataTemplate>
    </Window.Resources>
    <Grid>
        <Grid.Resources>
            <core:ShowProgram x:Key="ShowProgram" />
        </Grid.Resources>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0"/>
            <ColumnDefinition Width="2*"/>
            <ColumnDefinition Width="4*"/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="16"/>
            <RowDefinition Height="40"/>
            <RowDefinition/>
            <RowDefinition Height="50"/>
        </Grid.RowDefinitions>
        <Menu Grid.ColumnSpan="3" FontFamily="{StaticResource Montserrat}" BorderBrush="{DynamicResource PageBordersColor}">
            <MenuItem Header="{DynamicResource File}">
                <MenuItem Header="{DynamicResource CreateBase}" Click="OpenCreateData" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource OpenBase}" Click="OpenBase" InputGestureText="Ctrl + O" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="SaveMenuItem" Header="{DynamicResource SaveBase}" Click="SaveBase" IsEnabled="False" InputGestureText="Ctrl + S" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="LockMenuItem" Header="{DynamicResource LockStorage}" Click="LockMenuItem_OnClick" IsEnabled="False" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="UnlockMenuItem" Header="{DynamicResource UnlockStorage}" Click="UnlockMenuItem_OnClick" Template="{DynamicResource MenuItemTemplate1}"/>
                <Separator/>
                <MenuItem x:Name="NewLoginMenuItem" Header="{DynamicResource AddLogin}" IsEnabled="False" Click="MenuItem_Click" InputGestureText="Ctrl + N" Template="{DynamicResource MenuItemTemplate1}"/>
                <Separator/>
                <MenuItem Header="{DynamicResource Settings}" Click="OpenSettingsWindow" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource ExitFrom}" InputGestureText="Alt + F4" Click="ClosedApplication" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
            <MenuItem Header="{DynamicResource Tools}">
                <MenuItem Header="{DynamicResource PasswordGenerator}" Click="OpenPasswordGeneratorWindow" InputGestureText="Ctrl + G" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem x:Name="ChangeMenuItem" Header="{DynamicResource ChangeMasterPassword}" IsEnabled="False" Click="OpenChangeMasterPassword" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
            <MenuItem Header="{DynamicResource Reference}">
                <MenuItem Header="{DynamicResource CheckUpdates}" Click="CheckUpdateButton" Template="{DynamicResource MenuItemTemplate1}"/>
                <MenuItem Header="{DynamicResource AboutPrograms}" Click="OpenAboutWindow" Template="{DynamicResource MenuItemTemplate1}"/>
            </MenuItem>
        </Menu>

        <tb:TaskbarIcon x:Name="asd" Grid.Row="0" Grid.Column="0" x:Name="myNotifyIcon"
                        Visibility="Visible"
                        ToolTipText="Olib Password Manager"
                        IconSource="./icon.ico"
                        MenuActivation="RightClick"
                        DoubleClickCommand="{StaticResource ShowProgram}"
                        PopupActivation="LeftClick">
            <tb:TaskbarIcon.TrayPopup>
                <Border
                    Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}"
                    BorderThickness="1"
                    CornerRadius="5"
                    Width="300"
                    Height="450">
                    <Grid>
                        <Grid.Resources>
                            <Style TargetType="{x:Type ListBoxItem}">
                                <Setter Property="HorizontalContentAlignment" Value="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                                <Setter Property="VerticalContentAlignment" Value="{Binding VerticalContentAlignment, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}}}"/>
                                <Setter Property="FocusVisualStyle" Value="{StaticResource FocusVisual}"/>
                                <Setter Property="Template">
                                    <Setter.Value>
                                        <ControlTemplate TargetType="{x:Type ListBoxItem}">
                                            <Border x:Name="Bd" Background="Transparent" SnapsToDevicePixels="true">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="5"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Border x:Name="Bd2" Background="Transparent"/>
                                                    <ContentPresenter Grid.Column="1" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="True" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                                                </Grid>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="IsMouseOver" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                                    <Setter Property="Background" TargetName="Bd2" Value="{DynamicResource HoverBackground}"/>
                                                </MultiTrigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="Selector.IsSelectionActive" Value="False"/>
                                                        <Condition Property="IsSelected" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                                    <Setter Property="Background" TargetName="Bd2" Value="#931d60"/>
                                                </MultiTrigger>
                                                <MultiTrigger>
                                                    <MultiTrigger.Conditions>
                                                        <Condition Property="Selector.IsSelectionActive" Value="True"/>
                                                        <Condition Property="IsSelected" Value="True"/>
                                                    </MultiTrigger.Conditions>
                                                    <Setter Property="Background" TargetName="Bd" Value="{DynamicResource HoverBackground}"/>
                                                    <Setter Property="Background" TargetName="Bd2" Value="#931d60"/>
                                                </MultiTrigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Setter.Value>
                                </Setter>
                            </Style>
                        </Grid.Resources>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="40"/>
                            <RowDefinition/>
                            <RowDefinition Height="50"/>
                        </Grid.RowDefinitions>
                        <Label Grid.Row="0" Content="{DynamicResource ListOfItems}" VerticalContentAlignment="Center" FontSize="16" FontFamily="{StaticResource Montserrat}" Foreground="{DynamicResource ForegroundWindow}"/>
                        <ListBox x:Name="PasswordListNotifyIcon" FontFamily="{StaticResource Montserrat}" SelectionChanged="PasswordListNotifyIcon_OnSelectionChanged" Background="{DynamicResource BackgroundWindow}" BorderBrush="{DynamicResource PageBordersColor}" Grid.Row="1" VirtualizingPanel.ScrollUnit="Pixel" ItemTemplate="{StaticResource PasswordF}"/>
                        <Border x:Name="BorderInformation" Visibility="Collapsed" Grid.Row="0" Grid.RowSpan="3" Background="#FF5A0F26">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition/>
                                    <RowDefinition Height="50"/>
                                </Grid.RowDefinitions>
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <StackPanel Margin="10">
                                        <Label Content="{DynamicResource ItemInformation}" FontSize="16" Foreground="White"/>
                                        <Border Style="{DynamicResource PageBorder}">
                                            <StackPanel>
                                                <Label Content="{DynamicResource Name}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtName" Margin="5" IsReadOnly="True"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BUsername">
                                            <StackPanel>
                                                <Label Content="{DynamicResource Username}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtNameAccount" Margin="5" IsReadOnly="True"/>
                                                <Button Content="{DynamicResource Copy}" Click="Button_Click" Margin="5" HorizontalAlignment="Left"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="bPassportName">
                                            <StackPanel>
                                                <Label Content="{DynamicResource FullName}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="txtPassportName" Margin="5"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="bPassportNumber">
                                            <StackPanel>
                                                <Label Content="{DynamicResource PassportSeriesAndNumber}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="txtPassportNumber" Margin="5"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="bPassportPlaceOfIssue">
                                            <StackPanel>
                                                <Label Content="{DynamicResource PlaceOfIssue}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="txtPassportPlaceOfIssue" Margin="5"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BCardName">
                                            <StackPanel>
                                                <Label Content="{DynamicResource CardName}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtCardName" Margin="5" IsReadOnly="True"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BCardNumber">
                                            <StackPanel>
                                                <Label Content="{DynamicResource CardNumber}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtCardNumber" Margin="5" IsReadOnly="True"/>
                                                <Button Content="{DynamicResource Copy}" Click="Button_Click_3" Margin="5" HorizontalAlignment="Left"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BDate">
                                            <StackPanel>
                                                <Label Content="{DynamicResource YearOfService}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtDate" Margin="5" IsReadOnly="True"/>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BSecurityCode">
                                            <StackPanel>
                                                <Label Content="{DynamicResource SecurityCodeCard}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <PasswordBox x:Name="TxtSecurityCode" Margin="5" IsEnabled="False"/>
                                                <TextBox x:Name="TxtSecurityCodeCollapsed" Margin="5" Visibility="Collapsed" TextChanged="TxtSecurityCodeCollapsed_OnTextChanged"/>
                                                <StackPanel Orientation="Horizontal" Margin="5">
                                                    <Button Content="{DynamicResource Copy}" Click="Button_Click_4" Margin="5" HorizontalAlignment="Left"/>
                                                    <CheckBox x:Name="CbSecurityCodeHide" Content="{DynamicResource Show}" VerticalAlignment="Center" Checked="CbSecurityCodeHide_OnChecked" Unchecked="CbSecurityCodeHide_OnChecked"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border Style="{DynamicResource PageBorder}" x:Name="BPassword">
                                            <StackPanel>
                                                <Label Content="{DynamicResource Password+}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <PasswordBox x:Name="TxtPassword" Margin="5" IsEnabled="False" PasswordChanged="txtPassword_PasswordChanged"/>
                                                <TextBox x:Name="TxtPasswordCollapsed" Margin="5" Visibility="Collapsed" IsReadOnly="True"/>
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="{DynamicResource Copy}" Margin="5" Click="CopyPassword"/>
                                                    <CheckBox x:Name="CbHide" Content="{DynamicResource Show}" Foreground="{DynamicResource ForegroundWindow}" VerticalAlignment="Center" Checked="CollapsedPassword" Unchecked="CollapsedPassword"/>
                                                </StackPanel>
                                                <DockPanel>
                                                    <Label Content="{DynamicResource Complexity}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                    <ProgressBar x:Name="PbHard" Margin="5" Maximum="300" ValueChanged="pbHard_ValueChanged"/>
                                                </DockPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="BWebSite" Style="{DynamicResource PageBorder}">
                                            <StackPanel>
                                                <Label Content="{DynamicResource WebSite}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtWebSite" Margin="5" IsReadOnly="True" />
                                                <StackPanel Orientation="Horizontal">
                                                    <Button Content="{DynamicResource GoTo}" Click="Button_Click_1" Margin="5"/>
                                                    <Button Content="{DynamicResource Copy}" Click="Button_Click_2" Margin="5"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                        <Border x:Name="BrNote" Style="{DynamicResource PageBorder}">
                                            <StackPanel>
                                                <Label Content="{DynamicResource Notes}" Foreground="{DynamicResource ForegroundWindow}"/>
                                                <TextBox x:Name="TxtNote" Margin="5" IsReadOnly="True" Height="80"/>
                                            </StackPanel>
                                        </Border>
                                        <StackPanel Orientation="Horizontal">
                                            <Label Content="{DynamicResource Create}" Foreground="White"/>
                                            <Label x:Name="LabelCreateData" Foreground="White"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal">
                                            <Label x:Name="TxtLabelChange" Content="{DynamicResource Update}" Foreground="White"/>
                                            <Label x:Name="LabelChangeData" Foreground="White"/>
                                        </StackPanel>
                                    </StackPanel>
                                </ScrollViewer>
                                <Border Grid.Row="1" Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,1,1,1">
                                    <StackPanel Orientation="Horizontal">
                                        <Button Content="{DynamicResource Back}" Margin="10" Click="ButtonBase_OnClick"/>
                                    </StackPanel>
                                </Border>
                            </Grid>
                        </Border>
                    </Grid>
                </Border>
            </tb:TaskbarIcon.TrayPopup>
            <tb:TaskbarIcon.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="{DynamicResource ShowOPM}" Click="MenuItem_OnClick"/>
                    <MenuItem x:Name="LockNotifyIcon" Header="{DynamicResource LockStorage}" Click="LockMenuItem_OnClick" IsEnabled="False" Template="{DynamicResource MenuItemTemplate1}"/>
                    <MenuItem x:Name="UnlockNotifyIcon" Header="{DynamicResource UnlockStorage}" Click="UnlockMenuItem_OnClick" Template="{DynamicResource MenuItemTemplate1}"/>
                    <Separator/>
                    <MenuItem Header="{DynamicResource ExitFrom}" Click="ClosedApplication" />
                </ContextMenu>
            </tb:TaskbarIcon.ContextMenu>
        </tb:TaskbarIcon>

        <ListBox x:Name="PasswordList" Background="{DynamicResource BackgroundWindow}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,0,1,0" Grid.Row="2" VirtualizingPanel.ScrollUnit="Pixel" ItemTemplate="{StaticResource PasswordF}" Grid.Column="1" SelectionChanged="PasswordList_SelectionChanged"/>
            <Border Grid.Column="1" Grid.Row="3" Background="{DynamicResource GlobalBorderColor}" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,1,1,0" >
            <Button x:Name="AddButton" IsEnabled="False" Content="{DynamicResource Add}" Margin="10" Click="CreatePassword"/>
        </Border>
        <Border Grid.Column="1" Grid.Row="1" Background="#931d60" BorderBrush="{DynamicResource PageBordersColor}" BorderThickness="0,0,1,1">
            <DockPanel Margin="10">
                <Image Source="{DynamicResource loupeDrawingImage}" Height="20" Margin="0,0,5,0"/>
                <TextBox x:Name="TxtSearch" TextChanged="TxtSearch_TextChanged"/>
            </DockPanel>
        </Border>
        <Frame x:Name="FrameWindow" Grid.Column="2" Grid.Row="1" Grid.RowSpan="3" Source="/Pages/StartScreen.xaml" NavigationUIVisibility="Hidden"/>
    </Grid>
</Window>