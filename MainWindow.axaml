<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:reactiveUi="http://reactiveui.net"
		xmlns:l="clr-namespace:OlibKey.Views.Pages;assembly=OlibKey"
        mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
        x:Class="OlibKey.MainWindow"
        Width="800" Height="450"
        Title="OlibKey"
        WindowStartupLocation="CenterScreen"
		Icon="avares://OlibKey/app.ico"
		Background="{DynamicResource ThemeWindowBackgroundBrush}"
        MinWidth="500" MinHeight="350">
	<Window.KeyBindings>
		<KeyBinding Command="{Binding OpenDatabaseCommand}" Gesture="Ctrl+O"/>
		<KeyBinding Command="{Binding SaveDatabaseCommand}" Gesture="Ctrl+S"/>
		<KeyBinding Command="{Binding CreateLoginCommand}" Gesture="Ctrl+N"/>
		<KeyBinding Command="{Binding OpenPasswordGeneratorWindowCommand}" Gesture="Ctrl+G"/>
	</Window.KeyBindings>
	<NativeMenu.Menu>
		<NativeMenu>
			<NativeMenuItem Header="{DynamicResource File}">
				<NativeMenuItem.Menu>
					<NativeMenu>
						<NativeMenuItem Header="{DynamicResource CreateBase}" Command="{Binding CreateDatabaseCommand}"/>
						<NativeMenuItem Header="{DynamicResource OpenBase}" Command="{Binding OpenDatabaseCommand}" Gesture="CMD+O"/>
						<NativeMenuItem Header="{DynamicResource SaveBase}" Command="{Binding SaveDatabaseCommand}" IsEnabled="{Binding IsUnlockDatabase}" Gesture="CMD+S"/>
						<NativeMenuItem Header="{DynamicResource UnlockStorage}" Command="{Binding UnlockDatabaseCommand}" IsEnabled="{Binding IsLockDatabase}"/>
						<NativeMenuItem Header="{DynamicResource LockStorage}" Command="{Binding LockDatabaseCommand}" IsEnabled="{Binding IsUnlockDatabase}"/>
						<NativeMenuItemSeperator/>
						<NativeMenuItem Header="{DynamicResource AddLogin}" Command="{Binding CreateLoginCommand}" IsEnabled="{Binding IsUnlockDatabase}" Gesture="CMD+N"/>
						<NativeMenuItem Header="{DynamicResource Search}" Command="{Binding ShowSearchWindowCommand}" IsEnabled="{Binding IsUnlockDatabase}"/>
						<NativeMenuItemSeperator/>
						<NativeMenuItem Header="{DynamicResource Settings}" Command="{Binding OpenSettingsWindowCommand}"/>
						<NativeMenuItem Header="{DynamicResource ExitFrom}" Command="{Binding ExitProgramCommand}" Gesture="CMD+Q"/>
					</NativeMenu>
				</NativeMenuItem.Menu>
			</NativeMenuItem>
			<NativeMenuItem Header="{DynamicResource Tools}">
				<NativeMenuItem.Menu>
					<NativeMenu>
						<NativeMenuItem Header="{DynamicResource PasswordGenerator}" Gesture="CMD+G" Command="{Binding OpenPasswordGeneratorWindowCommand}"/>
						<NativeMenuItem Header="{DynamicResource ChangeMasterPassword}" Command="{Binding ChangeMasterPasswordCommand}"/>
					</NativeMenu>
				</NativeMenuItem.Menu>
			</NativeMenuItem>
			<NativeMenuItem Header="{DynamicResource Reference}">
				<NativeMenuItem.Menu>
					<NativeMenu>
						<NativeMenuItem Header="{DynamicResource CheckUpdates}" Command="{Binding CheckUpdateCommand}"/>
						<NativeMenuItem Header="{DynamicResource AboutPrograms}" Command="{Binding OpenAboutWindowCommand}"/>
					</NativeMenu>
				</NativeMenuItem.Menu>
			</NativeMenuItem>
		</NativeMenu>
	</NativeMenu.Menu>
	<DockPanel>
		<Menu DockPanel.Dock="Top" IsVisible="{Binding $parent[TopLevel].(NativeMenu.IsNativeMenuExported), Converter={StaticResource AvaloniaThemesDefaultNativeMenuBarInverseBooleanValueConverter}}" Background="{DynamicResource ThemeBackgroundBrush}" BorderThickness="0 0 0 1" BorderBrush="{DynamicResource ThemeGlobalBorderBrush}">
			<MenuItem Header="{DynamicResource File}">
				<MenuItem Header="{DynamicResource CreateBase}" Command="{Binding CreateDatabaseCommand}"/>
				<MenuItem Header="{DynamicResource OpenBase}" Command="{Binding OpenDatabaseCommand}" InputGesture="Ctrl + O"/>
				<MenuItem Header="{DynamicResource SaveBase}" Command="{Binding SaveDatabaseCommand}" InputGesture="Ctrl + S" IsEnabled="{Binding IsUnlockDatabase}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource SaveIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="{DynamicResource UnlockStorage}" Command="{Binding UnlockDatabaseCommand}" IsEnabled="{Binding IsLockDatabase}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource LockOpenIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="{DynamicResource LockStorage}" Command="{Binding LockDatabaseCommand}" IsEnabled="{Binding IsUnlockDatabase}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource LockIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<Separator Classes="MenuItemSeparators"/>
				<MenuItem Header="{DynamicResource AddLogin}" Command="{Binding CreateLoginCommand}" InputGesture="Ctrl + N" IsEnabled="{Binding IsUnlockDatabase}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource PlusIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="{DynamicResource Search}" Command="{Binding ShowSearchWindowCommand}" IsEnabled="{Binding IsUnlockDatabase}" Icon="{DynamicResource }">
					<MenuItem.Icon>
						<Image Source="{DynamicResource SearchIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<Separator Classes="MenuItemSeparators"/>
				<MenuItem Header="{DynamicResource Settings}" Command="{Binding OpenSettingsWindowCommand}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource GearIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="{DynamicResource ExitFrom}" Command="{Binding ExitProgramCommand}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource ExitIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
			</MenuItem>
			<MenuItem Header="{DynamicResource Tools}">
				<MenuItem Header="{DynamicResource PasswordGenerator}" InputGesture="Ctrl + G" Command="{Binding OpenPasswordGeneratorWindowCommand}"/>
				<MenuItem Header="{DynamicResource ChangeMasterPassword}" Command="{Binding ChangeMasterPasswordCommand}" IsEnabled="{Binding IsUnlockDatabase}"/>
			</MenuItem>
			<MenuItem Header="{DynamicResource Reference}">
				<MenuItem Header="{DynamicResource CheckUpdates}" Command="{Binding CheckUpdateCommand}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource DownloadIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
				<MenuItem Header="{DynamicResource AboutPrograms}" Command="{Binding OpenAboutWindowCommand}">
					<MenuItem.Icon>
						<Image Source="{DynamicResource QuestionIcon}"/>
					</MenuItem.Icon>
				</MenuItem>
			</MenuItem>
		</Menu>
		<Grid ColumnDefinitions="0,1*,2*" RowDefinitions="40,*,50,20">
			<reactiveUi:RoutedViewHost Grid.Row="1" Grid.Column="2" Grid.RowSpan="2" PageTransition="{x:Null}" Router="{Binding Router}">
				<reactiveUi:RoutedViewHost.DefaultContent>
					<l:StartPage/>
				</reactiveUi:RoutedViewHost.DefaultContent>
			</reactiveUi:RoutedViewHost>
			<Border Grid.Column="2" BorderThickness="0 0 0 1" Classes="ButtonsMenu">
				<TextBlock Text="{Binding NameStorage}" VerticalAlignment="Center" HorizontalAlignment="Center" FontSize="18" FontWeight="Bold"/>
			</Border>
			<ListBox x:Name="listBox" Padding="0" AutoScrollToSelectedItem="True" VirtualizationMode="None" Items="{Binding LoginList}" SelectedIndex="{Binding SelectedIndex}" Grid.Row="0" Grid.Column="1" Grid.RowSpan="2" Background="{DynamicResource ThemeBackgroundBrush}" BorderBrush="{DynamicResource ThemeGlobalBorderBrush}" BorderThickness="0 0 1 0"/>
			<Border Grid.Column="1" Grid.Row="2" BorderThickness="0 1 1 0" Classes="ButtonsMenu">
				<Grid ColumnDefinitions="*,40">
					<Button Command="{Binding CreateLoginCommand}" Content="{DynamicResource Add}" Margin="10" IsEnabled="{Binding IsUnlockDatabase}"/>
					<Button Grid.Column="1" Margin="0 10 10 10" ToolTip.Tip="{DynamicResource Search}" Command="{Binding ShowSearchWindowCommand}" IsEnabled="{Binding IsUnlockDatabase}" Padding="5">
						<Path Data="M 10.24949 0 C 7.0671703 0 4.4803723 2.5636361 4.4803723 5.6909091 c 0 1.327272 0.465251 2.527273 1.228264 3.509091 L 0.23727825 14.618182 c -0.316371 0.327273 -0.316371 0.836363 0 1.145454 C 0.40476825 15.927273 0.60947925 16 0.81419029 16 1.0375103 16 1.2422213 15.92727 1.4097123 15.763636 l 5.471357 -5.418181 C 7.8301823 11.018182 8.9840063 11.4 10.23088 11.4 13.4132 11.4 15.999999 8.8363641 15.999999 5.7090901 15.999999 2.5818181 13.431811 0 10.24949 0 Z m 0 9.9636363 c -2.3634777 0 -4.2803137 -1.9090912 -4.2803137 -4.2545462 0 -2.345454 1.916836 -4.254545 4.2803137 -4.254545 2.363478 0 4.280314 1.909091 4.280314 4.254545 0 2.345455 -1.916836 4.2545462 -4.280314 4.2545462 z m 2.88456 -4.1818182 c -0.03722 0.309091 -0.316371 0.545454 -0.632743 0.545454 -0.03722 0 -0.05583 0 -0.09305 0 -0.353591 -0.05454 -0.595522 -0.363636 -0.558302 -0.709091 0.130271 -0.945454 -0.949113 -1.436363 -1.004943 -1.454545 -0.316371 -0.145455 -0.465252 -0.527273 -0.316371 -0.836364 0.14888 -0.309091 0.521081 -0.454545 0.856063 -0.327272 0.07444 0.01818 2.009886 0.890909 1.749346 2.781818 z m -1.358535 1.381818 c 0.13027 0.127273 0.223321 0.327273 0.223321 0.509091 0 0.2 -0.07444 0.381818 -0.223321 0.509091 -0.13027 0.127273 -0.334981 0.218182 -0.521081 0.218182 -0.186102 0 -0.390812 -0.07273 -0.521083 -0.218182 -0.130269 -0.127273 -0.22332 -0.327273 -0.22332 -0.509091 0 -0.181818 0.07444 -0.381818 0.22332 -0.509091 0.130271 -0.127273 0.334981 -0.218182 0.521083 -0.218182 0.1861 0 0.372201 0.07273 0.521081 0.218182 z"/>
					</Button>
				</Grid>
			</Border>
			<Border Grid.ColumnSpan="3" Grid.Row="3" Background="{DynamicResource ThemeBackgroundBrush}" BorderBrush="{DynamicResource ThemeGlobalBorderBrush}" BorderThickness="0 1 0 0">
				<Grid ColumnDefinitions="Auto,*,Auto">
					<StackPanel Orientation="Horizontal" Margin="5 0 0 0">
						<TextBlock Text="{DynamicResource Ready}" x:Name="tbReady"/>
						<TextBlock x:Name="tbMessageStatusBar" IsVisible="False"/>
					</StackPanel>
					<StackPanel IsVisible="{Binding IsUnlockDatabase}" Grid.Column="2" Orientation="Horizontal" Margin="0 0 5 0">
						<TextBlock Text="{DynamicResource Elements}" Margin="0 0 5 0"/>
						<TextBlock Text="{Binding #listBox.ItemCount}"/>
					</StackPanel>
				</Grid>
			</Border>
		</Grid>
	</DockPanel>
</Window>